{% load static %}
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>{% block title %}Catalog of itmes{% endblock title %}</title>
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="preload" as="style" href="https://fonts.googleapis.com/css?family=Poiret+One|Roboto&display=swap"/>
        <meta name="msapplication-TileColor" content="#da532c">
        <meta name="theme-color" content="#ffffff">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
        <meta name="description" content="{% block desc %}Catalog of items{% endblock desc %}"/>

        <link
          media="print"
          onload="this.onload=null;this.removeAttribute('media');"
          href="https://fonts.googleapis.com/css?family=Poiret+One|Roboto&display=swap" 
          rel="stylesheet">
        <link 
            rel="stylesheet"
            href="{% static 'catalog/style.css' %}"/>
        {% block head %}
          <menu class="header">
            <div class="header-brand">
              <a href="{% url 'catalog:index' %}" class="catalog-name" title="{% if current_catalog_group %}{{ current_catalog_group.name }}{% endif %}">
                {% if current_catalog_group %}
                  {{ current_catalog_group.name }}
                {% else %}
                  Create Your Catalog
                {% endif %}
              </a>
            </div>
            <button class="burger-menu" aria-label="Toggle navigation" aria-expanded="false">
              <span></span>
              <span></span>
              <span></span>
            </button>
            <nav class="header-nav">
              {% if current_catalog_group %}
                <a id="create-action" href="{% url 'catalog:create' %}">Items</a>
                <a id="create-group-action" href="{% url 'catalog:create-group' %}">Groups</a>
              {% else %}
                <a id="create-catalog-group-action" href="{% url 'catalog:create-catalog-group' %}">Catalogs</a>
              {% endif %}
              <div class="user-menu">
                {% if not request.user.is_authenticated %}
                  <a href="{% url 'catalog:social:begin' 'google-oauth2' %}" class="catalog_item_button_small">login</a>
                {% else %}
                  <span class="user-email" title="{{request.user.email}}">{{request.user.email}}</span>
                  <form method="post" action="{% url 'catalog:logout' %}" style="display: inline;">
                    {% csrf_token %}
                    <button type="submit" class="catalog_item_button_small">logout</button>
                  </form>
                {% endif %}
              </div>
            </nav>
          </menu>
        {% endblock head %}
      </head>
      <body class="content_block">
          {% block content %}{% endblock content %}
          <script>
            document.addEventListener('DOMContentLoaded', function () {
              const burger = document.querySelector('.burger-menu');
              const nav = document.querySelector('.header-nav');

              burger.addEventListener('click', function () {
                const isExpanded = burger.getAttribute('aria-expanded') === 'true';
                burger.setAttribute('aria-expanded', !isExpanded);
                nav.classList.toggle('is-active');
              });
            });
          </script>
      </body>
  </html>
